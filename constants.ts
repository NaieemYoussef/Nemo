import { OperationType, FactCheckItem } from './types';

export const GEMINI_MODEL_TEXT = 'gemini-2.5-flash-preview-04-17';

export const OPERATION_PROMPTS: Record<OperationType, (text: string) => string> = {
  [OperationType.LINGUISTIC_CHECK]: (text) => `مهمتك هي التدقيق اللغوي والإملائي للنص التالي مع تطبيق القواعد المحددة بدقة. لا تتدخل في المعلومات أو الحقائق المذكورة. قدم النص المصحح بالكامل فقط، دون أي مقدمات أو ملاحظات إضافية. تجنب إضافة عبارات مثل «ما أسماه فلان» أو «ما وصفه بـ» ما لم تكن هذه العبارات موجودة بشكل صريح في النص الأصلي.

القواعد الواجب اتباعها:
1.  استبدل جميع علامات الاقتباس المزدوجة (مثل "...") بعلامات الاقتباس المزدوجة الفرنسية («...»).
2.  استخدم النقطة (.) فقط في نهاية كل فقرة. بين الجمل داخل الفقرة الواحدة، استخدم علامات الترقيم المناسبة الأخرى مثل الفاصلة (،) والفاصلة المنقوطة (؛). لا تضع نقاطًا في منتصف الفقرات.
3.  أعد صياغة الجمل التي تحتوي على تقديم وتأخير لتحسين تدفقها ووضوحها، مع الحفاظ التام على المعنى الأصلي.
4.  لا تتدخل في تدقيق أو تغيير الأسماء (أسماء الأشخاص، الأماكن، إلخ) المذكورة في النص. اتركها كما هي.
5.  عندما تجد الاختصار (د.) متبوعًا باسم، استبدله بـ«الدكتور» إذا كان الاسم مذكرًا، أو «الدكتورة» إذا كان الاسم مؤنثًا. (مثال: د.أحمد -> الدكتور أحمد، د.فاطمة -> الدكتورة فاطمة).
6.  لا تضف أي فواصل بين الفقرات مثل الخطوط (---).
7.  إذا تم ذكر مصدر (شخص وخبرته/وظيفته) عدة مرات في النص، اتبع القواعد التالية:
    أ. المرة الأولى: اذكر اسمه الكامل مع وظيفته/تخصصه (مثال: «قال الدكتور أحمد عبدالعال أخصائي أمراض الجلدية، إن...»).
    ب. المرة الثانية (في فقرة تالية أو بعد عدة جمل): اذكر اسم عائلته فقط (مثال: «وتابع «عبدالعال»، أن...»).
    ج. المرة الثالثة: اذكر وظيفته/تخصصه فقط (مثال: «وأضاف أخصائي الجلدية أن...»).
    د. المرات اللاحقة: لا تذكر الاسم أو اللقب أو الوظيفة، استخدم أفعالاً مثل «وتابع»، «وأضاف».
8.  إذا تكرر اسم شخص عدة مرات داخل نفس الفقرة، اكتفِ بذكره صراحةً في المرة الأولى، ثم استخدم الضمائر المناسبة في المرات التالية داخل تلك الفقرة. (مثال: «احتفل لاعب الزمالك ناصر منسي... إذ ظهرت زوجته...» بدلاً من «...ظهرت زوجة ناصر منسي...»).
9.  إذا بدأت فقرة بـ«كان» أو «كانت»، وكان من الممكن استخدام فعل أكثر تحديدًا ودلالة ليحل محلها ويحسن بداية الفقرة، فاستخدم ذلك الفعل المناسب. (مثال: بدلاً من «كانت زوجة ناصر منسي مرتدية فستاناً...»، استخدم «ارتدت زوجة ناصر منسي فستاناً...»).
10. تجنب بدء الأخبار أو التقارير أو المقالات بحرف جر (مثل «في خلال»، «خلال»). بدلاً من ذلك، ابدأ الجملة بفعل واضح وفاعل. (مثال: بدلاً من «خلال الساعات الماضية احتفل ناصر منسي...»، استخدم «احتفل ناصر منسي، خلال الساعات الماضية،...»).
11. **مهم جداً: تجنب تمامًا استخدام ألقاب التفخيم مثل 'معالي'، 'سيادته'، 'فخامته'، 'صاحب السمو'، أو ما شابهها. إذا كانت هذه الألقاب موجودة في النص الأصلي، قم بإزالتها أو استبدالها ببديل محايد (مثل ذكر المنصب فقط إذا لزم الأمر لسياق الجملة، مثال: 'قال الوزير' بدلاً من 'قال معالي الوزير'). لا تضف أي ألقاب تفخيم غير موجودة.**
12. **انتبه جيدًا لقواعد كتابة الهمزة. على سبيل المثال، اكتب «شؤون» (وليس «شئون»)، و«مسؤول» (وليس «مسئول»)، مع مراعاة صحة رسم الهمزة المتوسطة حسب حركتها وحركة ما قبلها.**

النص المطلوب تدقيقه هو:
\n\n${text}`,
  [OperationType.IMPROVE_PHRASING]: (text) => `مهمتك هي تحسين صياغة النص التالي لجعله أكثر وضوحًا وقوة وتأثيرًا وسلاسة في القراءة.

التعليمات:
1.  أعد صياغة الجمل والعبارات لتبسيطها وتحسين تدفقها.
2.  استخدم مفردات أكثر دقة وتأثيرًا إذا كان ذلك مناسبًا.
3.  حافظ على المعنى الأصلي للنص بشكل كامل. لا تضف معلومات جديدة ولا تحذف معلومات أساسية.
4.  إذا كان النص يتكون من عدة فقرات، قم بإضافة عناوين فرعية قصيرة ومناسبة بين الفقرات إذا كان ذلك يعزز من تنظيم النص ويسهل فهمه. يجب أن تكون العناوين الفرعية موجزة وتعكس محتوى الفقرة التالية لها. **هام جداً بشأن العناوين الفرعية: يجب أن تكون هذه العناوين نصًا عاديًا فقط، لا تستخدم أي تنسيق خاص مثل النجوم (مثل **عنوان**) أو علامات الشباك (مثل ## عنوان)، اتركها كسطر نصي عادي بين الفقرات.**
5.  لا تضف أي تعليقات أو شروحات حول التغييرات التي قمت بها. قدم النص المحسّن بالكامل فقط.
6.  تجنب إضافة عبارات مثل «ما أسماه فلان» أو «ما وصفه بـ» أو أي تصريفات مشابهة لهذه العبارات، إلا إذا كانت هذه العبارات موجودة بشكل صريح في النص الأصلي المقدم لك.
7.  إذا قمت بتضمين اقتباسات في النص المحسّن، استخدم دائمًا الأقواس الفرنسية «...» بدلاً من علامات الاقتباس المزدوجة العادية ("...").
8.  **مهم جداً: تجنب تمامًا استخدام ألقاب التفخيم مثل 'معالي'، 'سيادته'، 'فخامته'، 'صاحب السمو'، أو ما شابهها. إذا كانت هذه الألقاب موجودة في النص الأصلي، قم بإزالتها أو استبدالها ببديل محايد. لا تضف أي ألقاب تفخيم غير موجودة.**
9.  **انتبه جيدًا لقواعد كتابة الهمزة. على سبيل المثال، اكتب «شؤون» (وليس «شئون»)، و«مسؤول» (وليس «مسئول»)، مع مراعاة صحة رسم الهمزة المتوسطة حسب حركتها وحركة ما قبلها.**

النص المطلوب تحسين صياغته هو:
\n\n${text}`,
  [OperationType.FACT_CHECK]: (text) => `مهمتك هي التحقق من دقة المعلومات الواردة في النص التالي **بالاعتماد حصراً على البحث في مصادر موثوقة عبر الإنترنت**. لا تستخدم معلوماتك المخزنة مسبقًا.

لكل معلومة أو ادعاء رئيسي في النص المقدم:
1.  قم بالبحث عن المعلومة باستخدام أداة البحث المتاحة لك، مستهدفًا مواقع رسمية، وكالات أنباء ذات مصداقية عالية، وموسوعات معتمدة.
2.  قارن المعلومة المذكورة في النص مع النتائج التي حصلت عليها.
3.  يجب أن يكون الرد **حصريًا بتنسيق JSON**، وهو عبارة عن مصفوفة (array) من الكائنات (objects). كل كائن يمثل ادعاءً تم التحقق منه ويجب أن يحتوي على الحقول التالية فقط:
    *   \`original_claim\`: (string) الادعاء الأصلي كما ورد في النص.
    *   \`assessment_status\`: (string) نتيجة التقييم. القيم المسموح بها هي: "صحيح"، "خاطئ"، "يحتاج لتوضيح"، "تعذر التحقق"، "غير دقيق".
    *   \`assessment_details\`: (string) شرح مفصل لسبب التقييم، مع ذكر الأدلة من المصادر إذا أمكن. إذا كان التقييم "خاطئ" أو "غير دقيق"، وضح التصحيح هنا. **مهم: تجنب تمامًا استخدام ألقاب التفخيم مثل 'معالي'، 'سيادته'، 'فخامته' في هذا الشرح. بالإضافة إلى ذلك، انتبه جيدًا لقواعد كتابة الهمزة في الشرح، على سبيل المثال، اكتب «شؤون» (وليس «شئون»)، و«مسؤول» (وليس «مسئول»)، مع مراعاة صحة رسم الهمزة المتوسطة حسب حركتها وحركة ما قبلها.**
    *   **ملاحظة هامة حول الاقتباسات داخل قيم JSON**: إذا كانت القيمة النصية لأي من الحقول أعلاه (مثل assessment_details) تحتوي على اقتباس مباشر، يجب استخدام الأقواس الفرنسية «...» داخل النص المقتبس. مثال: \`"assessment_details": "أفاد المصدر بأن الوضع «مستقر حاليًا»."\`

مثال للرد المطلوب بتنسيق JSON:
\`\`\`json
[
  {
    "original_claim": "الرئيس الأمريكي الحالي هو دونالد ترامب.",
    "assessment_status": "خاطئ",
    "assessment_details": "وفقًا لموقع البيت الأبيض الرسمي، الرئيس الحالي للولايات المتحدة هو جو بايدن."
  },
  {
    "original_claim": "نقص الوزن ليس علامة من علامات مرض السرطان.",
    "assessment_status": "غير دقيق",
    "assessment_details": "تشير منظمة الصحة العالمية إلى أن فقدان الوزن غير المبرر يمكن أن يكون أحد أعراض السرطان، على الرغم من أنه «ليس العرض الوحيد أو الأكثر شيوعًا ويتطلب تقييمًا طبيًا»."
  }
]
\`\`\`

تأكد من أن الرد هو سلسلة JSON صالحة تحتوي على مصفوفة من هذه الكائنات.
النص المراد التحقق من صحته هو:
\n\n${text}`,
  [OperationType.PLAGIARISM_CHECK]: (text) => `مهمتك هي فحص النص التالي لكشف أي أجزاء قد تكون منسوخة من مصادر منشورة على الإنترنت (مثل المواقع الإخبارية، المقالات، المدونات، الخ). قم بالبحث الشامل على الإنترنت، بما في ذلك البحث عن ترجمات أو تطابقات محتملة بلغات أخرى حتى لو كان النص الأصلي باللغة العربية.

النص المراد فحصه هو:
\n\n${text}\n\n

التعليمات:
1.  حلل النص المقدم فقرة بفقرة.
2.  لكل فقرة، ابحث عن أي تسلسل يتكون من 15 كلمة متتالية أو أكثر يبدو أنه مطابق لمحتوى منشور عبر الإنترنت.
3.  إذا وجدت مثل هذا التسلسل، قم بإعادة النص الأصلي للمستخدم، ولكن مع وضع علامات خاصة حول الجزء المنسوخ بدقة. استخدم العلامة \`%%HIGHLIGHT_START%%\` مباشرة قبل بداية التسلسل المنسوخ، والعلامة \`%%HIGHLIGHT_END%%\` مباشرة بعد نهاية التسلسل المنسوخ.
    مثال: «هذا نص أصلي. %%HIGHLIGHT_START%%هذا الجزء تم تحديده كمنسوخ لأنه طويل ويتطابق مع مصدر%%HIGHLIGHT_END%% وهذا جزء أصلي آخر.»
4.  إذا لم تجد أي تسلسل من 15 كلمة أو أكثر يعتبر منسوخًا، أعد النص الأصلي كما هو بدون أي علامات.
5.  استخدم أداة البحث المتاحة لك للعثور على المصادر المشابهة وقدم قائمة بعناوين URL لهذه المصادر.
6.  يجب أن يكون تركيزك على التطابق الحرفي أو شبه الحرفي لتسلسلات الكلمات المحددة (15 كلمة أو أكثر). لا تقم بتظليل أفكار عامة أو صياغات مختلفة قليلاً.

النتيجة المطلوبة:
- النص الأصلي مع الأجزاء المنسوخة المحاطة بعلامات \`%%HIGHLIGHT_START%%\` و \`%%HIGHLIGHT_END%%\`.
- قائمة بالمصادر (URLs) التي تم العثور على تشابه فيها.`,
  [OperationType.REPHRASE]: (text) => `يرجى إعادة صياغة النص التالي بالكامل مع الحفاظ على المعنى الأصلي وجعله مختلفًا في الأسلوب والتعبير. إذا قمت بتضمين اقتباسات في النص المُعاد صياغته، استخدم دائمًا الأقواس الفرنسية «...» بدلاً من علامات الاقتباس المزدوجة العادية ("..."). **مهم جداً: تجنب تمامًا استخدام ألقاب التفخيم مثل 'معالي'، 'سيادته'، 'فخامته'، 'صاحب السمو'، أو ما شابهها في النص المعاد صياغته، حتى لو كانت موجودة في النص الأصلي. قم بإزالتها أو استبدالها ببديل محايد. بالإضافة إلى ذلك، انتبه جيدًا لقواعد كتابة الهمزة في النص المعاد صياغته، على سبيل المثال، اكتب «شؤون» (وليس «شئون»)، و«مسؤول» (وليس «مسئول»)، مع مراعاة صحة رسم الهمزة المتوسطة حسب حركتها وحركة ما قبلها.**

النص المطلوب إعادة صياغته هو: 
\n\n${text}`,
  // COMPREHENSIVE_CHECK does not need a direct prompt as it combines other operations.
  [OperationType.COMPREHENSIVE_CHECK]: (_text) => `This prompt should not be used directly.`,
};

export const OPERATION_LABELS: Record<OperationType, string> = {
  [OperationType.LINGUISTIC_CHECK]: "تدقيق لغوي وإملائي",
  [OperationType.IMPROVE_PHRASING]: "تحسين الصياغة",
  [OperationType.FACT_CHECK]: "التحقق من صحة المعلومات",
  [OperationType.PLAGIARISM_CHECK]: "فحص الانتحال وتحديد التشابه",
  [OperationType.REPHRASE]: "إعادة الصياغة",
  [OperationType.COMPREHENSIVE_CHECK]: "التدقيق الشامل (لغوي، صياغة، انتحال)",
};

export const CUSTOM_COPY_LABELS = {
  LINGUISTIC_AND_PHRASING: "التحسين اللغوي والصياغي",
};